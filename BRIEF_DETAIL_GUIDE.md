# ğŸ“„ Brief Detail Page Guide

## Tá»•ng Quan

Trang chi tiáº¿t Brief (`/briefs/[id]`) hiá»ƒn thá»‹ **Ä‘áº§y Ä‘á»§ thÃ´ng tin** cá»§a:
1. **Ã tÆ°á»Ÿng gá»‘c** mÃ  brief Ä‘Æ°á»£c táº¡o ra tá»« Ä‘Ã³
2. **Ná»™i dung brief** chi tiáº¿t Ä‘Æ°á»£c AI generate

---

## ğŸ¯ Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â—„ Back] Brief Title          [âœï¸] [ğŸ—‘]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ’¡ Ã TÆ¯á»NG Gá»C                 [â–¼]      â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚ â”‚ Title: Original Idea Title              â”‚ â”‚
â”‚ â”‚                                          â”‚ â”‚
â”‚ â”‚ ğŸ“ MÃ´ táº£: [idea description]           â”‚ â”‚
â”‚ â”‚ ğŸ’¬ LÃ½ do: [idea rationale]             â”‚ â”‚
â”‚ â”‚                                          â”‚ â”‚
â”‚ â”‚ Persona | Industry | Status             â”‚ â”‚
â”‚ â”‚ [Xem trang Ã tÆ°á»Ÿng]                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                               â”‚
â”‚ ğŸ“‹ Ná»˜I DUNG BRIEF                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ¯ Äá»‘i TÆ°á»£ng Má»¥c TiÃªu                   â”‚ â”‚
â”‚ â”‚ [target audience text]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“‹ Káº¿ Hoáº¡ch Ná»™i Dung                    â”‚ â”‚
â”‚ â”‚ [detailed content plan]                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ’¡ Äiá»ƒm ChÃ­nh (8)                       â”‚ â”‚
â”‚ â”‚ 1. [Point 1]                            â”‚ â”‚
â”‚ â”‚ 2. [Point 2]                            â”‚ â”‚
â”‚ â”‚ ...                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                               â”‚
â”‚ [Chi Tiáº¿t Viáº¿t]  [Keywords SEO]            â”‚
â”‚                                               â”‚
â”‚ [Timestamps]                                 â”‚
â”‚                                               â”‚
â”‚ [â—„ Quay láº¡i]           [Chá»‰nh sá»­a Brief]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Structure

### API Response

```typescript
interface BriefDetail {
  // Brief fields
  id: number
  idea_id: number
  title: string
  content_plan: string
  target_audience: string
  key_points: string[]
  tone?: string
  word_count?: number
  keywords?: string[]
  status: string
  created_at: string
  updated_at: string
  
  // Joined idea fields (from LEFT JOIN)
  idea_title?: string
  idea_description?: string
  idea_rationale?: string
  idea_persona?: string
  idea_industry?: string
  idea_status?: string
  idea_created_at?: string
}
```

### Backend Query

```sql
SELECT 
  b.*,
  i.title as idea_title,
  i.description as idea_description,
  i.rationale as idea_rationale,
  i.persona as idea_persona,
  i.industry as idea_industry,
  i.status as idea_status,
  i.created_at as idea_created_at
FROM briefs b
LEFT JOIN ideas i ON b.idea_id = i.id
WHERE b.id = $1
```

---

## ğŸ¨ Component Sections

### 1. Header

**Features**:
- Back button â†’ `/briefs`
- Brief title + status badge
- Brief ID + created date
- Action buttons: Edit, Delete

```tsx
<div className="flex items-start justify-between">
  <Link href="/briefs">
    <Button variant="ghost" size="icon">
      <ArrowLeft />
    </Button>
  </Link>
  <h1>{brief.title}</h1>
  <StatusBadge status={brief.status} />
  <Button variant="outline"><Edit /></Button>
  <Button variant="destructive"><Trash2 /></Button>
</div>
```

---

### 2. Ã TÆ°á»Ÿng Gá»‘c Section

**Design**:
- Highlighted card vá»›i gradient border
- Collapsible (expand/collapse)
- Lightbulb icon
- Link to Ideas page

**Content**:
- âœ… Idea Title
- âœ… Idea Description  
- âœ… Idea Rationale
- âœ… Persona badge
- âœ… Industry badge
- âœ… Status badge
- âœ… Created date

**Interaction**:
```tsx
const [showIdeaDetails, setShowIdeaDetails] = useState(true)

<CardHeader onClick={() => setShowIdeaDetails(!showIdeaDetails)}>
  <Lightbulb /> Ã TÆ°á»Ÿng Gá»‘c
  {showIdeaDetails ? <ChevronUp /> : <ChevronDown />}
</CardHeader>
```

---

### 3. Target Audience Card

```tsx
<Card>
  <CardHeader>
    <Target /> Äá»‘i TÆ°á»£ng Má»¥c TiÃªu
  </CardHeader>
  <CardContent>
    <p>{brief.target_audience}</p>
  </CardContent>
</Card>
```

**Icons**: ğŸ¯ Target icon (red)

---

### 4. Content Plan Card

```tsx
<Card>
  <CardHeader>
    <AlignLeft /> Káº¿ Hoáº¡ch Ná»™i Dung
  </CardHeader>
  <CardContent>
    <p className="whitespace-pre-line">
      {brief.content_plan}
    </p>
  </CardContent>
</Card>
```

**Styling**:
- `whitespace-pre-line` Ä‘á»ƒ giá»¯ line breaks
- Prose styling cho typography
- Leading-relaxed cho dá»… Ä‘á»c

---

### 5. Key Points Card

```tsx
<Card>
  <CardHeader>
    ğŸ’¡ Äiá»ƒm ChÃ­nh ({brief.key_points.length})
  </CardHeader>
  <CardContent>
    <ul>
      {brief.key_points.map((point, idx) => (
        <li>
          <span className="badge">{idx + 1}</span>
          <span>{point}</span>
        </li>
      ))}
    </ul>
  </CardContent>
</Card>
```

**Design**:
- Numbered badges (1, 2, 3, ...)
- Flex layout vá»›i gap
- Each point on separate line

---

### 6. Metadata Grid (2 columns)

**Left Card - Chi Tiáº¿t Viáº¿t**:
- Tone
- Word Count

**Right Card - Keywords SEO**:
- Keyword badges
- Wrap layout

```tsx
<div className="grid md:grid-cols-2 gap-6">
  <Card>
    <Type /> Chi Tiáº¿t Viáº¿t
    <div>Tone: {brief.tone}</div>
    <div>Word Count: {brief.word_count}</div>
  </Card>
  
  <Card>
    ğŸ”‘ Keywords SEO ({keywords.length})
    <div className="flex flex-wrap gap-2">
      {keywords.map(kw => <Badge>{kw}</Badge>)}
    </div>
  </Card>
</div>
```

---

### 7. Timestamps Card

```tsx
<Card>
  <Calendar /> Táº¡o lÃºc: {formatDate(created_at)}
  {updated_at !== created_at && (
    <Calendar /> Cáº­p nháº­t: {formatDate(updated_at)}
  )}
</Card>
```

---

### 8. Actions Footer

```tsx
<CardFooter className="flex justify-between">
  <Button variant="outline">
    <ArrowLeft /> Quay láº¡i danh sÃ¡ch
  </Button>
  <Button variant="default">
    <Edit /> Chá»‰nh sá»­a Brief
  </Button>
</CardFooter>
```

---

## ğŸ­ UI/UX Features

### Collapsible Idea Section

**Why**: 
- Giáº£m clutter
- User cÃ³ thá»ƒ focus vÃ o brief content
- NhÆ°ng váº«n cÃ³ thá»ƒ xem idea context khi cáº§n

**Default State**: Expanded (`showIdeaDetails = true`)

**Animation**: Smooth transition vá»›i Tailwind

---

### Status Badges

| Status | Badge | Color |
|--------|-------|-------|
| **Brief Statuses** |
| `draft` | ğŸ“ Draft | Gray |
| `review` | ğŸ‘€ Review | Orange |
| `approved` | âœ“ Approved | Blue |
| `published` | ğŸš€ Published | Green |
| **Idea Statuses** |
| `pending` | â³ Pending | Gray |
| `selected` | âœ… Selected | Green |
| `generated` | ğŸ“„ Generated | Blue |

---

### Icons Guide

| Section | Icon | Color |
|---------|------|-------|
| Idea | `Lightbulb` | Yellow |
| Target Audience | `Target` | Red |
| Content Plan | `AlignLeft` | Purple |
| Key Points | `ğŸ’¡` | - |
| Tone/Word Count | `Type` | Green |
| Keywords | `ğŸ”‘` | - |
| Timestamps | `Calendar` | Muted |

---

## ğŸ”„ User Flows

### Flow 1: View Brief Detail

```
1. Tá»« /briefs
   â†’ Click [ğŸ‘ Xem chi tiáº¿t]
   â†“
2. Navigate to /briefs/[id]
   â†’ Loading skeleton
   â†’ Fetch brief data
   â†“
3. Page loaded
   â†’ Ã tÆ°á»Ÿng gá»‘c (expanded)
   â†’ Brief content sections
   â†’ Actions footer
```

### Flow 2: Navigate Back to Idea

```
1. Xem brief detail
   â†“
2. Trong "Ã TÆ°á»Ÿng Gá»‘c" section
   â†’ Click [ğŸ’¡ Xem trang Ã tÆ°á»Ÿng]
   â†“
3. Navigate to /ideas
   â†’ Scroll to find original idea
```

### Flow 3: Delete Brief

```
1. Click [ğŸ—‘ Delete button]
   â†“
2. Confirmation dialog
   â†’ "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a..."
   â†“
3. Confirm
   â†’ API call DELETE /briefs/:id
   â†’ Toast success
   â†’ Redirect to /briefs
```

---

## ğŸ“± Responsive Design

### Desktop (â‰¥1024px)
- Max-width: 5xl (896px)
- Metadata grid: 2 columns
- Full content visible

### Tablet (768px - 1024px)
- Max-width: 4xl
- Metadata grid: 2 columns
- Adjusted padding

### Mobile (<768px)
- Full width with padding
- Metadata grid: 1 column
- Stacked layout
- Smaller font sizes

---

## ğŸ¨ Styling Details

### Color Scheme

**Light Mode**:
- Background: `bg-background` (white)
- Card: `bg-card` (white/gray-50)
- Text: `text-foreground` (gray-900)
- Muted: `text-muted-foreground` (gray-600)

**Dark Mode**:
- Background: `bg-background` (gray-950)
- Card: `bg-card` (gray-900)
- Text: `text-foreground` (gray-50)
- Muted: `text-muted-foreground` (gray-400)

### Idea Section Highlight

```css
border-2 border-primary/20
bg-gradient-to-br from-primary/5 to-background
```

**Effect**: Subtle gradient Ä‘á»ƒ distinguish tá»« brief content

---

## ğŸš€ API Integration

### Fetch Brief

```typescript
const fetchBrief = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/briefs/${briefId}`)
    setBrief(response.data)
  } catch (error) {
    toastError('Lá»—i', 'KhÃ´ng thá»ƒ táº£i brief')
  } finally {
    setLoading(false)
  }
}
```

### Delete Brief

```typescript
const handleDelete = async () => {
  try {
    await axios.delete(`${API_BASE_URL}/briefs/${briefId}`)
    toastSuccess('ÄÃ£ xÃ³a!', 'Brief Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng.')
    router.push('/briefs')
  } catch (error) {
    toastError('Lá»—i', 'KhÃ´ng thá»ƒ xÃ³a brief.')
  }
}
```

---

## ğŸ’¡ Pro Tips

### 1. Pre-line for Content Plan

```tsx
<p className="whitespace-pre-line">
  {brief.content_plan}
</p>
```

**Why**: AI thÆ°á»ng tráº£ vá» text vá»›i `\n`, cáº§n preserve line breaks

### 2. Numbered List Styling

```tsx
<span className="badge">{idx + 1}</span>
```

**Design**: Circular badge vá»›i sá»‘ thá»© tá»±

### 3. Conditional Rendering

```tsx
{brief.idea_description && (
  <div>...</div>
)}
```

**Why**: KhÃ´ng pháº£i lÃºc nÃ o cÅ©ng cÃ³ Ä‘áº§y Ä‘á»§ idea fields

### 4. Date Formatting

```typescript
const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('vi-VN', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  })
}
```

**Output**: "3 thÃ¡ng 11, 2025 14:30"

---

## ğŸ” Troubleshooting

### Brief Not Found

**Symptoms**: Blank page hoáº·c "Brief khÃ´ng tÃ¬m tháº¥y"

**Solutions**:
```bash
# Check brief exists
curl http://localhost:3911/api/briefs/2

# Check briefs list
curl http://localhost:3911/api/briefs
```

### Missing Idea Fields

**Symptoms**: Idea section hiá»ƒn thá»‹ "KhÃ´ng cÃ³ thÃ´ng tin"

**Cause**: Idea Ä‘Ã£ bá»‹ xÃ³a hoáº·c LEFT JOIN tráº£ vá» NULL

**Solution**: Conditional rendering cho tá»«ng field

### Loading Forever

**Symptoms**: Skeleton khÃ´ng bao giá» biáº¿n máº¥t

**Solutions**:
- Check network tab
- Verify API endpoint
- Check CORS
- Verify backend running

---

## ğŸ¯ Future Enhancements

### Planned Features:
- [ ] Edit brief inline
- [ ] Version history
- [ ] Export to PDF/Markdown
- [ ] Share link
- [ ] Comments/feedback
- [ ] Collaborate vá»›i team
- [ ] AI regenerate sections
- [ ] Preview as article

### UI Improvements:
- [ ] Smooth scroll to sections
- [ ] Print-friendly layout
- [ ] Copy to clipboard buttons
- [ ] Syntax highlighting for code
- [ ] Rich text editor
- [ ] Drag-to-reorder key points

---

## ğŸ“š Related Pages

- **Ideas List** (`/ideas`) - Xem táº¥t cáº£ Ã½ tÆ°á»Ÿng
- **Briefs List** (`/briefs`) - Danh sÃ¡ch briefs
- **Home** (`/`) - Trang chá»§ vá»›i AI generation

---

## ğŸ§ª Testing

### Manual Test Checklist:

```bash
# 1. Create a brief (if needed)
curl -X PATCH http://localhost:3911/api/ideas/52/status \
  -d '{"status": "selected"}'

curl -X POST http://localhost:3911/api/briefs/generate \
  -d '{"idea_id": 52, "model": "gemini"}'

# 2. Open detail page
open http://localhost:3910/briefs/2

# 3. Check sections:
âœ“ Header with title & badges
âœ“ Ã tÆ°á»Ÿng gá»‘c (collapsible)
âœ“ Target Audience
âœ“ Content Plan
âœ“ Key Points
âœ“ Metadata grid
âœ“ Timestamps
âœ“ Actions footer

# 4. Test interactions:
âœ“ Collapse/expand idea section
âœ“ Click "Xem trang Ã tÆ°á»Ÿng"
âœ“ Click "Chá»‰nh sá»­a Brief"
âœ“ Click "Delete" â†’ Confirm
âœ“ Back button
```

---

## ğŸ“– Code Reference

**File**: `frontend/app/briefs/[id]/page.tsx`

**Key Functions**:
- `fetchBrief()` - Load data from API
- `handleDelete()` - Delete brief
- `formatDate()` - Format timestamps
- `getStatusBadge()` - Render status badges

**Components Used**:
- `PageTransition` - Smooth enter animation
- `Card`, `CardHeader`, `CardContent`, `CardFooter`
- `Badge` - Status and metadata tags
- `DeleteDialog` - Confirmation modal
- `SkeletonList` - Loading state

---

**Created**: November 3, 2025  
**Status**: âœ… Production Ready  
**Features**: Full idea + brief display  
**Responsive**: Mobile, Tablet, Desktop

